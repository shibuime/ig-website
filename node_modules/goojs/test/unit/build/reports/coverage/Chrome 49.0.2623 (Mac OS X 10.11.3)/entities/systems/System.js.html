<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for entities/systems/System.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">entities/systems/</a> System.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">23.53% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>12/51</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/28</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/11</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">23.53% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>12/51</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">	/**
	 * Creates a new System
	 *
	 * Base class for all entity systems
	 *        &lt;ul&gt;
	 *        &lt;li&gt; interests = null -&gt; listen to all entities
	 *        &lt;li&gt; interests = [] -&gt; don't listen to any entities
	 *        &lt;li&gt; interests = ['coolComponent', 'testComponent'] -&gt; listen to entities that contains at minimum 'coolComponent' and 'testComponent'
	 *        &lt;/ul&gt;
	 * See [this engine overview article]{@link http://www.gootechnologies.com/learn/tutorials/engine/engine-overview/} for more info.
	 * @param {string} type System type name as a string
	 * @param {Array&lt;String&gt;} interests Array of component types this system is interested in
	 * @property {string} type System type
	 * @property {Array&lt;String&gt;} interests Array of component types this system is interested in
	 */
<span class="fstat-no" title="function not covered" >	function System(type, interests) {</span>
<span class="cstat-no" title="statement not covered" >		this.type = type;</span>
<span class="cstat-no" title="statement not covered" >		this.interests = interests;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >		this._activeEntities = [];</span>
&nbsp;
		/**
		 * @type {boolean}
		 */
<span class="cstat-no" title="statement not covered" >		this.passive = false;</span>
&nbsp;
		/**
		 * Priority of a system. The lower the number the higher the priority is. By default a systems has priority 0. Internal goo systems (like TransformSystem and CameraSystem) should have negative priority.
		 * @type {number}
		 */
<span class="cstat-no" title="statement not covered" >		this.priority = 0;</span>
	}
&nbsp;
	/**
	 * Called on each render frame, if the system is not passive.
	 * @param {array} entities
	 * @param {number} tpf
	 */
	System.prototype.process = <span class="fstat-no" title="function not covered" >function (/*entities, tpf*/) {</span>};
&nbsp;
	/**
	 * Called when an entity is added to the world and systems need to be informed
	 * @param entity
	 */
	System.prototype.added = <span class="fstat-no" title="function not covered" >function (entity) {</span>
<span class="cstat-no" title="statement not covered" >		this._check(entity);</span>
	};
&nbsp;
	/**
	 * Called when an entity gets/loses components
	 * @param entity
	 */
	System.prototype.changed = <span class="fstat-no" title="function not covered" >function (entity) {</span>
<span class="cstat-no" title="statement not covered" >		this._check(entity);</span>
	};
&nbsp;
	/**
	 * Called when an entity is removed from the world
	 * @param entity
	 */
	System.prototype.removed = <span class="fstat-no" title="function not covered" >function (entity) {</span>
<span class="cstat-no" title="statement not covered" >		var index = this._activeEntities.indexOf(entity);</span>
<span class="cstat-no" title="statement not covered" >		if (index !== -1) {</span>
<span class="cstat-no" title="statement not covered" >			this._activeEntities.splice(index, 1);</span>
<span class="cstat-no" title="statement not covered" >			if (this.deleted) {</span>
<span class="cstat-no" title="statement not covered" >				this.deleted(entity);</span>
			}
		}
	};
&nbsp;
	/**
	 * Called when the system is added to the world.
	 * This method is called automatically when the system is added to a world.
	 * By default it will go through all entities
	 * accounted by the entity manager and try to add them to this system.
	 * @param {World} world
	 */
	System.prototype.setup = <span class="fstat-no" title="function not covered" >function (world) {</span>
<span class="cstat-no" title="statement not covered" >		world.entityManager.getEntities().forEach(this._check.bind(this));</span>
	};
&nbsp;
	/**
	 * Called when the system is removed from the world.
	 * By default it will call the deleted method on all entities it is keeping track of.
	 */
	System.prototype.cleanup = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >		if (this.deleted) {</span>
<span class="cstat-no" title="statement not covered" >			for (var i = 0; i &lt; this._activeEntities.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >				var entity = this._activeEntities[i];</span>
<span class="cstat-no" title="statement not covered" >				this.deleted(entity);</span>
			}
		}
	};
&nbsp;
<span class="fstat-no" title="function not covered" >	function getTypeAttributeName(type) {</span>
<span class="cstat-no" title="statement not covered" >		return type.charAt(0).toLowerCase() + type.substr(1);</span>
	}
&nbsp;
	/**
	 * Checks if a system is interested in an entity based on its interests list and adds or removed the entity from the system's index
	 * @param entity {Entity} to check if the system is interested in
	 * @private
	 */
	System.prototype._check = <span class="fstat-no" title="function not covered" >function (entity) {</span>
<span class="cstat-no" title="statement not covered" >		if (this.interests &amp;&amp; this.interests.length === 0) {</span>
<span class="cstat-no" title="statement not covered" >			return;</span>
		}
<span class="cstat-no" title="statement not covered" >		var isInterested = this.interests === null;</span>
<span class="cstat-no" title="statement not covered" >		if (!isInterested &amp;&amp; this.interests.length &lt;= entity._components.length) {</span>
<span class="cstat-no" title="statement not covered" >			isInterested = true;</span>
<span class="cstat-no" title="statement not covered" >			for (var i = 0; i &lt; this.interests.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >				var interest = getTypeAttributeName(this.interests[i]);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >				if (!entity[interest]) {</span>
<span class="cstat-no" title="statement not covered" >					isInterested = false;</span>
<span class="cstat-no" title="statement not covered" >					break;</span>
				}
			}
		}
&nbsp;
<span class="cstat-no" title="statement not covered" >		var index = this._activeEntities.indexOf(entity);</span>
<span class="cstat-no" title="statement not covered" >		if (isInterested &amp;&amp; index === -1) {</span>
<span class="cstat-no" title="statement not covered" >			this._activeEntities.push(entity);</span>
<span class="cstat-no" title="statement not covered" >			if (this.inserted) {</span>
<span class="cstat-no" title="statement not covered" >				this.inserted(entity);</span>
			}
		} else <span class="cstat-no" title="statement not covered" >if (!isInterested &amp;&amp; index !== -1) {</span>
<span class="cstat-no" title="statement not covered" >			this._activeEntities.splice(index, 1);</span>
<span class="cstat-no" title="statement not covered" >			if (this.deleted) {</span>
<span class="cstat-no" title="statement not covered" >				this.deleted(entity);</span>
			}
		}
	};
&nbsp;
	System.prototype._process = <span class="fstat-no" title="function not covered" >function (tpf) {</span>
<span class="cstat-no" title="statement not covered" >		this.process(this._activeEntities, tpf);</span>
	};
&nbsp;
	System.prototype.clear = <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >		this._activeEntities = [];</span>
	};
&nbsp;
	module.exports = System;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Mar 17 2016 10:37:40 GMT+0100 (CET)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
